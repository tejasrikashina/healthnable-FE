<mat-dialog-content class="mat-typography" style="overflow-y: auto; max-height:80vh;background-color: white;">
    <div class="row">
        <div class="col-md-12 d-flex justify-content-between align-items-center">
            <h2 style="font-weight: 500; font-size: 1.4rem; margin: 0;">
                <span class="m-2">{{ 'workflow.viewWF' | translate }}</span>
            </h2>
            <button mat-icon-button class="text-end" (click)="onCancel()">
          <mat-icon>close</mat-icon>
        </button>
        </div>
    </div>


    <div class="container-fluid">
        <div class="row m-lg-2">
            @for(row of rows; track row){ @for(header of headers; track header){

            <div class="col-md-3">
                <p>{{header}}</p>
            </div>
            <div class="col-md-9">
                <p>{{row[header]}}</p>

            </div>
            } }
            <form [formGroup]="form">
                <div class="row">
                    <div class="col-md-9">
                        <healthnable-status [label]="'workflow.status'" [formControlName]="'status'" [statusChange]="onStatusChange()" [formGroupValue]="form" [status]="status"></healthnable-status>
                    </div>
                </div>
            </form>
        </div>
        <div class="my-4 mx-4">
            <mat-card-title>{{ 'workflow.workStages' | translate }}</mat-card-title>
        </div>
        <div class="table-responsive col-md-12 my-2">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="width: 95%;">
                <ng-container matColumnDef="stageName">
                    <th mat-header-cell *matHeaderCellDef>Stage Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                </ng-container>

                <ng-container matColumnDef="assignedentity">
                    <th mat-header-cell *matHeaderCellDef> Assigned Entities </th>
                    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                </ng-container>
                <ng-container matColumnDef="nextPossibleStage">
                    <th mat-header-cell *matHeaderCellDef> Next Possible Stages </th>
                    <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
                </ng-container>
                <ng-container matColumnDef="bothaction">
                    <th mat-header-cell *matHeaderCellDef> Action </th>
                    <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
                </ng-container>



                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>

            @if(dataSource.data.length===0){
            <div class="m-3  text-center h6">
                <p class="m-0">No Data Found</p>
            </div>
            }
            <mat-paginator [length]="0" [pageSize]="0" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page">
            </mat-paginator>

        </div>
        <div class="my-4 mx-4">
            <mat-card-title>{{ 'workflow.assignedEntities' | translate }}</mat-card-title>
        </div>
        <!-- <div class="table-responsive col-md-12 my-2">
            <healthnable-table [displayedColumns]="displayedColumns1"></healthnable-table>
        </div> -->
        <div class="table-responsive col-md-12 my-2">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="width: 95%;">
                <ng-container matColumnDef="stageName">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                </ng-container>

                <ng-container matColumnDef="entityId">
                    <th mat-header-cell *matHeaderCellDef> Entity Id</th>
                    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                </ng-container>
                <ng-container matColumnDef="entityName">
                    <th mat-header-cell *matHeaderCellDef> Entity Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
                </ng-container>
                <ng-container matColumnDef="currentStage">
                    <th mat-header-cell *matHeaderCellDef> Current Stage </th>
                    <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
                </ng-container>
                <ng-container matColumnDef="stage">
                    <th mat-header-cell *matHeaderCellDef> Stage </th>
                    <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
                </ng-container>

                <ng-container matColumnDef="bothaction">
                    <th mat-header-cell *matHeaderCellDef> Action </th>
                    <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
            </table>

            @if(dataSource.data.length===0){
            <div class="m-3  text-center h6">
                <p class="m-0">No Data Found</p>
            </div>
            }
            <mat-paginator [length]="0" [pageSize]="0" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page">
            </mat-paginator>

        </div>
        <div class="my-4 mx-4">
            <mat-card-title>{{ 'workflow.wfRule' | translate }}</mat-card-title>
        </div>
        <!-- <div class="table-responsive col-md-12 my-2">
            <healthnable-table [displayedColumns]="displayedColumns2"></healthnable-table>
        </div> -->
        <div class="table-responsive col-md-12 my-2">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="width: 95%;">
                <ng-container matColumnDef="stageName">
                    <th mat-header-cell *matHeaderCellDef>Stage Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                </ng-container>

                <ng-container matColumnDef="assignedentity">
                    <th mat-header-cell *matHeaderCellDef> Assigned Entities </th>
                    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                </ng-container>
                <ng-container matColumnDef="nextPossibleStage">
                    <th mat-header-cell *matHeaderCellDef> Next Possible Stages </th>
                    <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
                </ng-container>
                <ng-container matColumnDef="bothaction">
                    <th mat-header-cell *matHeaderCellDef> Action </th>
                    <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
                </ng-container>



                <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
            </table>
            @if(dataSource.data.length===0){
            <div class="m-3  text-center h6">
                <p class="m-0">No Data Found</p>
            </div>
            }
            <mat-paginator [length]="0" [pageSize]="0" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page">
            </mat-paginator>


        </div>
    </div>
    <div>
    </div>

    <mat-dialog-actions align="center" class="my-3">
        <button mat-flat-button class="cancel-btn text-black" (click)="onCancel()">  {{'workflow.back' | translate}}
    </button>
    </mat-dialog-actions>
</mat-dialog-content>