<mat-dialog-content class="mat-typography" style="overflow-y: auto; max-height:80vh;background-color: white;">
    <div class="row">
        <div class="col-md-12 d-flex justify-content-between align-items-center">
            <h2 style="font-weight: 500; font-size: 1.4rem; margin: 0;">
                <span class="m-2">{{ 'kpi.addFilter' | translate }}</span>
            </h2>
            <button mat-icon-button class="text-end" (click)="onCancel()">
          <mat-icon>close</mat-icon>
        </button>
        </div>
    </div>
    <div class="container-fluid ">
        <form [formGroup]="addfilterForm">
            <div class="row m-lg-4">
                <div class="col-md-12">
                    <healthnable-select [label]="'kpi.field'" [formControlName]="'field'" [formGroupValue]="addfilterForm" [required]="false" [buttonDis]="true" [options]="fieldVal" [name]="'field'" [placeholder]="'Select Field'"></healthnable-select>
                </div>
                <div class="col-md-12">
                    <healthnable-select [label]="'kpi.operator'" [formControlName]="'operator'" [formGroupValue]="addfilterForm" [required]="false" [buttonDis]="true" [options]="operatorVal" [name]="'operator'" [placeholder]="'Select Operand Type'"></healthnable-select>
                </div>

                <div class="col-md-12">
                    <healthnable-select [label]="'kpi.value'" [formControlName]="'value'" [formGroupValue]="addfilterForm" [required]="false" [buttonDis]="true" [options]="value" [name]="'value'" [placeholder]="'Select value'"></healthnable-select>
                </div>
                <ng-container formArrayName="filters">
                    @for(filter of filterFormArray.controls;track filter; let index=$index){
                    <div [formGroupName]="index">
                        <div class="col-md-12">
                            <healthnable-select [label]="'kpi.field'" [formControlName]="'field'" [formGroupValue]="addfilterForm" [required]="false" [buttonDis]="true" [options]="fieldVal" [name]="'field'" [placeholder]="'Select Field'"></healthnable-select>
                        </div>
                        <div class="col-md-12">
                            <healthnable-select [label]="'kpi.operator'" [formControlName]="'operator'" [formGroupValue]="addfilterForm" [required]="false" [buttonDis]="true" [options]="operatorVal" [name]="'operator'" [placeholder]="'Select Operand Type'"></healthnable-select>
                        </div>

                        <div class="col-md-12">
                            <healthnable-select [label]="'kpi.value'" [formControlName]="'value'" [formGroupValue]="addfilterForm" [required]="false" [buttonDis]="true" [options]="value" [name]="'value'" [placeholder]="'Select value'"></healthnable-select>
                        </div>

                        <div class="col-md-7  my-2">
                            <button mat-flat-button class="cancel-btn text-black" (click)="removeFilter(index)"> {{'kpi.remove' | translate}}</button>
                        </div>

                    </div>

                    }

                </ng-container>
                <div class="col-md-12">
                    <button mat-flat-button class="submit-btn" (click)="addFilter()">
                         {{'kpi.addFilter' | translate}}
                    </button>
                </div>
                <div class="col-md-12 mt-4">
                    <mat-card-title>
                        <span class="m-2"> {{ 'kpi.tips'  | translate }}</span>
                    </mat-card-title>
                    <p class="m-4">Use filter to limit your data(e.g.,date=today)</p>
                    <p class="m-4">You can apply multiple filters; all must be true(AND)</p>
                </div>
            </div>
            <div class="d-flex justify-content-center my-3">
                <button mat-flat-button class="cancel-btn text-black " (click)="onCancel() ">  {{'kpi.cancel' | translate}}</button>
                <button mat-flat-button class="submit-btn me-3" (click)="reset()">
                            {{'kpi.reset' | translate}} 
                    </button>
                <button mat-flat-button class="submit-btn " (click)="saveFilter()" [disabled]="addfilterForm.invalid">
                        {{'kpi.save' | translate}}
                   
                  
                </button>


            </div>
        </form>
    </div>


</mat-dialog-content>