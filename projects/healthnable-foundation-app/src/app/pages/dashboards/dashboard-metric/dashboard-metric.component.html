<mat-card class="cardWithShadow">
    <healthnable-header></healthnable-header>
    <mat-card-content>
        <mat-card-title>
            <span class="m-2"> {{ 'metricDrilldown.header'  | translate }}</span>
        </mat-card-title>
        <div class="my-4">
            <form [formGroup]="metricDrillForm">
                <div class="container-fluid">
                    <div class="row m-lg-5">

                        <div class="col-md-7 mx-5">
                            <healthnable-select [label]="'metricDrilldown.dashboard'" [formControlName]="'dashboard'" [formGroupValue]="metricDrillForm" [required]="true" [options]="dashboardValue" [optionLabel]="'name'" [name]="'dashboard'" [placeholder]="'Select Dashboard'"></healthnable-select>

                        </div>
                        <div class="col-md-7 mx-5 mb-5">
                            <healthnable-select [label]="'metricDrilldown.kpi'" [formControlName]="'metric'" [formGroupValue]="metricDrillForm" [required]="true" [options]="metricValue" [name]="'metric'" [optionLabel]="'name'" [placeholder]="'Select Metric'"></healthnable-select>

                        </div>
                        <div class="col-md-7 mx-5 mt-3">
                            <healthnable-select [label]="'metricDrilldown.mappedScreen'" [formControlName]="'mappedScreen'" [formGroupValue]="metricDrillForm" [required]="true" [options]="mappedScreen" [optionLabel]="'name'" [name]="'mappedScreen'" [placeholder]="'Select Mapped Screen'"></healthnable-select>

                        </div>
                        <div class="col-md-7 mx-5">
                            <healthnable-input [style]="'background-color:rgb(245 245 245)'" [readonly]="'readonly'" [label]="'metricDrilldown.objType'" [formControlName]="'objType'" [formGroupValue]="metricDrillForm" [required]="true" [buttonDis]="true" [name]="'objType'" [placeholder]="'Enter Target Object Type '"
                                [type]="'text'" [minimum]="3" [maximum]="70"></healthnable-input>
                        </div>
                        <div class="col-md-12 mt-2">
                            <div class="row" style="margin-left: 38px;">
                                <div class="col-md-3">
                                    <mat-label class="mat-subtitle-2 f-w-400">Navigation Type
                                        <span class="required">*</span>
                                    </mat-label>
                                </div>
                                <div class="col-md-7">
                                    @for(setup of drilldownSetup; track setup){

                                    <p-radioButton [inputId]="setup.key" [value]="setup.name" formControlName="selectedDrilldown" />
                                    <label [for]="setup.key" class="mx-3">
                {{ setup.name }}
            </label> }
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="d-flex justify-content-center my-3 ">
                    <button mat-flat-button class="cancel-btn text-black" (click)="clear()">  {{'metricDrilldown.clearMapping' | translate}}</button>
                    <button mat-flat-button class="submit-btn me-3" (click)="previewMapping()">
                        {{'metricDrilldown.preview' | translate}}
                    
                    </button>
                    <button mat-flat-button class="submit-btn " (click)="addMapping()" [disabled]="metricDrillForm.invalid">
                        {{'metricDrilldown.addMapping' | translate}}
</button>

                </div>
            </form>

            <div class="row">
                <mat-card-title class="my-4">
                    <span class="m-2"> {{ 'metricDrilldown.subheader'  | translate }}</span>
                </mat-card-title>
                <div class="table-responsive col-md-12 my-2">
                    <healthnable-table [displayedColumns]="displayedColumns" [tableName]="'metricDrilldown'"></healthnable-table>
                </div>



            </div>
        </div>
    </mat-card-content>
</mat-card>